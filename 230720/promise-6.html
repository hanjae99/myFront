<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>promise6</title>
  </head>
  <body>
    <script>
      function buyAsync(myMoney) {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            let payments = parseInt(prompt("구매 상품 금액 입력"));
            if (payments <= myMoney) {
              console.log(`${payments} 금액을 지불`);
              let exchange = myMoney - payments;
              resolve(exchange);
            } else {
              reject(`잔액은 ${myMoney} 입니다. 구매불가`);
            }
          }, 1000);
        });
      }
      buyAsync(500)
        .then((exchange) => {
          console.log(`잔액은: ${exchange}원`);
          return buyAsync(exchange);
        })
        .then((exchange) => {
          console.log(`잔액은: ${exchange}원`);
          return buyAsync(exchange);
        })
        .then((exchange) => {
          console.log(`잔액은: ${exchange}원`);
        })
        .catch((reject) => {
          console.log(reject);
        });
    </script>
  </body>
</html>
